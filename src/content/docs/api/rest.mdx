---
title: REST API Reference
description: HTTP API for managing Sprites programmatically
---

import APIEndpoint from '@/components/APIEndpoint.astro';
import { APIBody } from '@/components/react';
import Callout from '@/components/Callout.astro';
import ParamTable from '@/components/ParamTable.astro';
import Param from '@/components/Param.astro';
import StatusCodes from '@/components/StatusCodes.astro';
import StatusBadge from '@/components/StatusBadge.astro';

The Sprites REST API allows you to manage Sprites programmatically via HTTP requests.

## Base URL

```
https://api.sprites.dev
```

## Authentication

All API requests require authentication via Bearer token:

```bash
curl -H "Authorization: Bearer $SPRITE_TOKEN" \
  https://api.sprites.dev/v1/sprites
```

### Getting a Token

Create a token at [sprites.dev/account](https://sprites.dev/account), or generate one via the CLI or SDK:

```bash
# Via CLI (stores in config)
sprite org auth

# View token (after disabling keyring)
sprite org keyring disable
cat ~/.sprites/sprites.json | grep api_token
```

Or programmatically:

```javascript
const token = await SpritesClient.createToken(flyMacaroon, orgSlug);
```

## Endpoints

### Sprites

<APIEndpoint method="POST" path="/v1/sprites" description="Create a new Sprite.">
  <APIBody title="Request">
```json
{
  "name": "my-sprite",
  "url_settings": {
    "auth": "sprite"
  }
}
```
  </APIBody>
  <APIBody title="Response">
```json
{
  "id": "sprite-abc123",
  "name": "my-sprite",
  "status": "cold",
  "organization": "personal",
  "url": "https://my-sprite-abc123.sprites.app",
  "url_settings": {
    "auth": "sprite"
  },
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```
  </APIBody>
</APIEndpoint>

<Callout type="tip">
`url_settings.auth` accepts `sprite` (default) or `public`.
</Callout>

<APIEndpoint method="GET" path="/v1/sprites" description="List all Sprites for the authenticated organization.">
  <APIBody title="Parameters">
    <ParamTable>
      <Param name="prefix" type="string" description="Filter by name prefix" />
      <Param name="max_results" type="integer" default="50" description="Maximum results (max: 50)" />
      <Param name="continuation_token" type="string" description="Pagination token" />
    </ParamTable>
  </APIBody>
  <APIBody title="Response">
```json
{
  "sprites": [
    {
      "id": "sprite-abc123",
      "name": "my-sprite",
      "status": "running",
      "organization": "personal",
      "url": "https://my-sprite-abc123.sprites.app",
      "url_settings": {
        "auth": "sprite"
      },
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    }
  ],
  "has_more": false,
  "next_continuation_token": null
}
```
  </APIBody>
</APIEndpoint>

<APIEndpoint method="GET" path="/v1/sprites/:name" description="Get details for a specific Sprite.">
  <APIBody title="Response">
```json
{
  "id": "sprite-abc123",
  "name": "my-sprite",
  "status": "running",
  "organization": "personal",
  "url": "https://my-sprite-abc123.sprites.app",
  "url_settings": {
    "auth": "sprite"
  },
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```
  </APIBody>
</APIEndpoint>

<APIEndpoint method="PUT" path="/v1/sprites/:name" description="Update Sprite settings. Only url_settings is supported.">
  <APIBody title="Request">
```json
{
  "url_settings": {
    "auth": "public"
  }
}
```
  </APIBody>
  <APIBody title="Response">
```json
{
  "id": "sprite-abc123",
  "name": "my-sprite",
  "status": "running",
  "organization": "personal",
  "url": "https://my-sprite-abc123.sprites.app",
  "url_settings": {
    "auth": "public"
  },
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T11:00:00Z"
}
```
  </APIBody>
</APIEndpoint>

<APIEndpoint method="DELETE" path="/v1/sprites/:name" description="Delete a Sprite and all associated resources.">
  <APIBody title="Response">
Returns <StatusBadge code={204} label="No Content" /> on success.
  </APIBody>
</APIEndpoint>

<APIEndpoint method="GET" path="/v1/sprites/:name/check" description="Check if a Sprite is healthy and responding.">
  <APIBody title="Response">
```json
{
  "sprite_name": "my-sprite",
  "sprite_id": "sprite-abc123",
  "status": "healthy",
  "reason": null,
  "checked_at": "2024-01-15T10:35:00Z",
  "elapsed": 150
}
```
  </APIBody>
  <APIBody title="Status Values">
    <ParamTable>
      <Param name="healthy" type="string" description="Sprite is running and responsive" />
      <Param name="hibernated" type="string" description="Sprite is hibernated" />
      <Param name="unhealthy" type="string" description="Sprite is not responding" />
      <Param name="error" type="string" description="Error checking sprite" />
    </ParamTable>
  </APIBody>
</APIEndpoint>

<APIEndpoint method="POST" path="/v1/sprites/:name/upgrade" description="Upgrade a Sprite to the latest configuration.">
  <APIBody title="Request (optional)">
```json
{
  "version": "0.0.1-rc27"
}
```
  </APIBody>
  <APIBody title="Response">
```json
{
  "name": "my-sprite",
  "status": "upgraded"
}
```
  </APIBody>
</APIEndpoint>

### Organizations

<APIEndpoint method="GET" path="/v1/organization" description="Get info for the organization that owns the authenticated token.">
  <APIBody title="Response">
```json
{
  "organization": {
    "slug": "personal",
    "sprites_enabled": true,
    "active_sprites": ["my-sprite", "dev-server"],
    "max_sprites": 100,
    "active_sprite_limit": 10
  }
}
```
  </APIBody>
</APIEndpoint>

### HTTP Proxy

Requests to `/v1/sprites/:name/*` are proxied to the Sprite's environment.

<APIEndpoint method="GET" path="/v1/sprites/:name/*" description="The request is forwarded to the Sprite, and the response is returned.">
  <APIBody title="Example">
If your sprite is running a web server on port 8080:

```bash
curl -H "Authorization: Bearer $SPRITE_TOKEN" \
  https://api.sprites.dev/v1/sprites/my-sprite/api/users
```
  </APIBody>
</APIEndpoint>

## Error Responses

Errors return appropriate HTTP status codes with JSON bodies:

```json
{
  "error": "sprite not found"
}
```

Validation errors return a list:

```json
{
  "errors": ["invalid wait_for_capacity parameter"]
}
```

### Status Codes

<StatusCodes
  columns={2}
  codes={[
    { code: 200, label: "Success" },
    { code: 201, label: "Created" },
    { code: 204, label: "No Content", description: "Successful delete" },
    { code: 400, label: "Bad Request" },
    { code: 401, label: "Unauthorized" },
    { code: 403, label: "Forbidden" },
    { code: 404, label: "Not Found" },
    { code: 409, label: "Conflict", description: "e.g., name already exists" },
    { code: 422, label: "Unprocessable Entity" },
    { code: 429, label: "Too Many Requests" },
    { code: 500, label: "Internal Server Error" },
  ]}
/>

## Pagination

List endpoints support pagination:

```bash
# First page
curl -H "Authorization: Bearer $SPRITE_TOKEN" \
  "https://api.sprites.dev/v1/sprites?max_results=10"

# Response includes continuation token
# {
#   "sprites": [...],
#   "has_more": true,
#   "next_continuation_token": "abc123"
# }

# Next page
curl -H "Authorization: Bearer $SPRITE_TOKEN" \
  "https://api.sprites.dev/v1/sprites?max_results=10&continuation_token=abc123"
```

## Examples

### Create and Configure a Sprite

```bash
# Create sprite
curl -X POST \
  -H "Authorization: Bearer $SPRITE_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "api-test"
  }' \
  https://api.sprites.dev/v1/sprites

# Make URL public
curl -X PUT \
  -H "Authorization: Bearer $SPRITE_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"url_settings": {"auth": "public"}}' \
  https://api.sprites.dev/v1/sprites/api-test

# Check health
curl -H "Authorization: Bearer $SPRITE_TOKEN" \
  https://api.sprites.dev/v1/sprites/api-test/check
```

### List All Sprites with Pagination

```bash
#!/bin/bash

TOKEN="$SPRITE_TOKEN"
BASE_URL="https://api.sprites.dev/v1/sprites"
CONTINUATION=""

while true; do
  if [ -z "$CONTINUATION" ]; then
    RESPONSE=$(curl -s -H "Authorization: Bearer $TOKEN" "$BASE_URL?max_results=50")
  else
    RESPONSE=$(curl -s -H "Authorization: Bearer $TOKEN" "$BASE_URL?max_results=50&continuation_token=$CONTINUATION")
  fi

  echo "$RESPONSE" | jq '.sprites[].name'

  HAS_MORE=$(echo "$RESPONSE" | jq -r '.has_more')
  if [ "$HAS_MORE" != "true" ]; then
    break
  fi

  CONTINUATION=$(echo "$RESPONSE" | jq -r '.next_continuation_token')
done
```

## Related Documentation

- [JavaScript SDK](/sdks/javascript) - Programmatic access
- [Go SDK](/sdks/go) - Native Go client
- [CLI Reference](/cli/commands) - Command-line interface
