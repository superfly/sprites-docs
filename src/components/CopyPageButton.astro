---
import { CopyPageButton as CopyPageButtonReact } from './react/CopyPageButton'

// Get page data from Starlight's route
const { entry, slug } = Astro.locals.starlightRoute || {}
const pageTitle = entry?.data?.title || 'Documentation'
const pageMarkdown = entry?.body || ''
const pageUrl = Astro.url.href
---

<div class="copy-page-button-wrapper">
  <CopyPageButtonReact
    client:load
    pageMarkdown={pageMarkdown}
    pageUrl={pageUrl}
    pageTitle={pageTitle}
  />
</div>

<style>
  .copy-page-button-wrapper {
    display: flex;
    align-items: center;
  }

  /* Match search box styling in dark mode */
  :global([data-theme='dark']) .copy-page-button-wrapper :global(button) {
    background: var(--sl-color-gray-6);
  }

  :global([data-theme='dark']) .copy-page-button-wrapper :global(button:hover) {
    background: var(--sl-color-gray-5);
  }

  /* Make separator visible */
  :global([data-theme='dark']) .copy-page-button-wrapper :global([data-slot='button-group-separator']) {
    background: var(--sl-color-gray-4);
  }
</style>
